{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft": "Warning",
      "Microsoft.Hosting.Lifetime": "Information",
      "IdentityServer4": "Warning"
    },
    "Console": {
      "FormatterName": "json",
      "FormatterOptions": {
        "IncludeScopes": true,
        "TimestampFormat": "o",
        "UseUtcTimestamp": true
      }
    }
  },
  "IdentityServer": {
    "Authority": "https://api.{{ crpg_domain_name }}",
    "Clients": [
      {
        "ClientId": "crpg-web-ui",
        "ClientName": "cRPG Web UI",
        "ClientSecrets": [{ "Value": "" }],
        "RequireClientSecret": false,
        "AllowedGrantTypes": ["authorization_code"],
        "AllowedScopes": ["openid", "user_api"],
        "AllowedCorsOrigins": ["https://{{ crpg_domain_name }}"],
        "RedirectUris": ["https://{{ crpg_domain_name }}", "https://{{ crpg_domain_name }}/silent-renew.html"],
        "PostLogoutRedirectUris": ["https://{{ crpg_domain_name }}"],
        "AccessTokenType": "Jwt",
        "RequireConsent": false,
        "AccessTokenLifetime": 3600,
        "IdentityTokenLifetime": 300,
        "RequirePkce": true,
        "AllowAccessTokensViaBrowser": true,
        "AllowOfflineAccess": true
      },
      {
        "ClientId": "crpg-forum",
        "ClientName": "cRPG Forum",
        "ClientSecrets": [{ "Value": "3BHLkNM+dJ+MLqerWsCwXQjRDb5vwzioY7/W8DcOM3A=" }],
        "AllowedGrantTypes": ["authorization_code"],
        "AllowedScopes": ["openid", "profile"],
        "RedirectUris": ["https://forum.{{ crpg_domain_name }}/auth/oidc/callback"],
        "PostLogoutRedirectUris": ["https://forum.{{ crpg_domain_name }}"],
        "AccessTokenType": "Jwt",
        "AccessTokenLifetime": 3600,
        "IdentityTokenLifetime": 300,
        "RequirePkce": false,
        "AllowAccessTokensViaBrowser": true,
        "AllowOfflineAccess": true
      },
      {
        "ClientId": "crpg-game-server",
        "ClientName": "cRPG Game Server",
        "ClientSecrets": [
        {% for crpg_api_key in crpg_api_keys %}
          { "Value": "{{ crpg_api_key }}" },
        {% endfor %}
        ],
        "AllowedGrantTypes": ["client_credentials"],
        "AllowedScopes": ["openid", "game_api"],
        "AccessTokenLifetime": 31536000
      }
    ],
    "Providers": {
      "Steam": { "ApplicationKey": "{{ steam_api_key }}" }
    }
  },
  "AllowedOrigins": "https://{{ crpg_domain_name }}",
  "Urls": "http://localhost:{{ crpg_api_port }}",
  "ConnectionStrings": {
    "Crpg": "Host=localhost;Database={{ crpg_db }};Username={{ crpg_db_user }};Password={{ crpg_db_user_password }};Application Name={{ crpg_api_service_name }}"
  }
}
